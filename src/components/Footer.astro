---
import { Button } from '@base-ui/react';
import { Github, Twitter, Linkedin, Mail, ArrowUp, Heart } from 'lucide-astro';

import { navItems } from '#/data/navigation';
import { profile, socials } from '#/data/profile';

const iconMap: Record<string, typeof Github> = {
  github: Github,
  twitter: Twitter,
  linkedin: Linkedin,
};
---

<footer class="relative mt-32 overflow-hidden">
  <!-- Decorative top border with gradient -->
  <div
    class="absolute top-0 left-0 right-0 h-px bg-linear-to-r from-transparent via-border to-transparent"
  ></div>

  <div class="section-container py-16 md:py-20">
    <div class="grid md:grid-cols-2 gap-12 md:gap-16 mb-16">
      <div class="space-y-5">
        <h4 class="font-mono text-xs uppercase tracking-widest text-text-muted">
          Get in Touch
        </h4>
        <a
          href={`mailto:${profile.email}`}
          class="inline-flex items-center gap-2 text-sm hover:text-primary transition-colors group"
        >
          <Mail class="w-4 h-4"/>
          <span class="relative">
            {profile.email}
            <span
              class="absolute left-0 bottom-0 w-0 h-px bg-primary transition-all duration-300 group-hover:w-full"
            ></span>
          </span>
        </a>
        <div class="flex gap-3">
          {socials.map((social) => {
            const Icon = iconMap[social.platform];
            return Icon && (
              <a
                href={social.url}
                target="_blank"
                rel="noopener"
                class="btn-icon"
                aria-label={social.platform.charAt(0).toUpperCase() + social.platform.slice(1)}
              >
                <Icon class="w-4 h-4" />
              </a>
            );
          })}
        </div>
      </div>

      <div class="space-y-5">
        <h4 class="font-mono text-xs uppercase tracking-widest text-text-muted">
          Quick Links
        </h4>
        <nav class="flex flex-col gap-2">
          <a href="/" class="text-sm hover:text-primary transition-colors w-fit"
            >Home</a
          >
          {navItems.map((item) => (
            <a 
              href={item.href} 
              class="text-sm hover:text-primary transition-colors w-fit"
            >
              {item.label}
            </a>
          ))}
        </nav>

        <Button
          id="back-to-top"
          className="mt-2 inline-flex items-center gap-2 font-mono text-xs uppercase tracking-wide text-text-muted hover:text-text transition-colors group"
          aria-label="Back to top"
        >
          <ArrowUp
            class="w-4 h-4 transition-transform group-hover:-translate-y-0.5"
          />
          <span>Back to Top</span>
        </Button>
      </div>
    </div>

    <!-- Decorative divider -->
    <div
      class="h-px bg-linear-to-r from-transparent via-border-light to-transparent mb-6"
    ></div>

    <div class="flex items-center justify-center gap-2 text-sm text-text-muted">
      <Heart class="size-3.5 text-primary fill-primary"/>
      <span class="font-ta tracking-wide">யாதும் ஊரே, யாவரும் கேளிர் !</span>
    </div>
  </div>
</footer>

<script>
  const backToTopBtn = document.getElementById('back-to-top');
  backToTopBtn?.addEventListener('click', () => {
    window.scrollTo({ top: 0, behavior: 'smooth' });
  });
</script>
